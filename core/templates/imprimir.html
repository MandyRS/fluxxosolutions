<!DOCTYPE html>
<html lang="pt-br">
<head>
<meta charset="UTF-8">
<title>Or√ßamento #{{ orcamento.id }} - {{ orcamento.empresa.nome_fantasia }}</title>
<style>
  /* Reset b√°sico */
  body, h1, h2, h3, p, table {
    margin: 0;
    padding: 0;
  }

  body {
    font-family: "Segoe UI", Arial, sans-serif;
    background: #f4f4f6;
    margin: 30px;
    color: #333;
    line-height: 1.5;
  }

  header {
    display: flex;
    justify-content: space-between;
    align-items: center;
    border-bottom: 3px solid #2c3e50;
    padding-bottom: 15px;
    margin-bottom: 30px;
  }

  header img {
    height: 80px;
    border-radius: 8px;
    border: 1px solid #ccc;
    background: white;
    padding: 5px;
  }

  .empresa-info {
    text-align: right;
    font-size: 13px;
    color: #555;
  }

  .empresa-info strong {
    font-size: 15px;
    color: #2c3e50;
  }

  h1 {
    text-align: center;
    font-size: 30px;
    margin-bottom: 20px;
    color: #2c3e50;
    text-transform: uppercase;
    letter-spacing: 1px;
  }

  .dados-secundarios {
    display: flex;
    justify-content: space-between;
    flex-wrap: wrap;
    background: #fff;
    padding: 15px 20px;
    border-radius: 6px;
    box-shadow: 0 2px 5px rgba(0,0,0,0.05);
    margin-bottom: 25px;
    font-size: 13px;
  }

  .dados-secundarios div {
    margin-bottom: 8px;
    min-width: 180px;
  }

  table {
    width: 100%;
    border-collapse: collapse;
    background: #fff;
    border-radius: 6px;
    overflow: hidden;
    box-shadow: 0 2px 5px rgba(0,0,0,0.05);
    margin-bottom: 25px;
  }

  th, td {
    padding: 12px 10px;
    font-size: 13px;
  }

  th {
    background: #2c3e50;
    color: #fff;
    text-align: left;
    font-weight: 600;
  }

  tr:nth-child(even) td {
    background: #f9f9f9;
  }

  .totais {
    margin-top: 20px;
    text-align: right;
    font-size: 14px;
    background: #fff;
    padding: 15px 20px;
    border-radius: 6px;
    box-shadow: 0 2px 5px rgba(0,0,0,0.05);
  }

  .totais p {
    margin: 6px 0;
  }

  .totais strong {
    color: #2c3e50;
    font-size: 15px;
  }

  .observacoes {
    background: #fff;
    padding: 15px 20px;
    border-left: 5px solid #2c3e50;
    border-radius: 6px;
    margin-top: 25px;
    font-size: 13px;
    box-shadow: 0 2px 5px rgba(0,0,0,0.05);
  }

  .assinatura {
    margin-top: 50px;
    text-align: center;
    font-size: 13px;
  }

  .assinatura strong {
    display: block;
    margin-bottom: 5px;
    color: #2c3e50;
  }

  .no-print {
    text-align: center;
    margin-top: 20px;
  }

  .no-print button {
    background-color: #2c3e50;
    color: white;
    border: none;
    padding: 10px 25px;
    font-size: 14px;
    border-radius: 4px;
    cursor: pointer;
    transition: background 0.3s;
  }

  .no-print button:hover {
    background-color: #1a252f;
  }

  @media print {
    body { margin: 15px; background: white; }
    header { border-bottom: 1px solid #444; }
    .no-print { display: none; }
    .totais, .observacoes { page-break-inside: avoid; }
  }
</style>
</head>
<body>

<header>
  <div>
    {% if orcamento.empresa.logo %}
      <img src="{{ orcamento.empresa.logo.url }}" alt="Logo da empresa">
    {% else %}
      <strong>{{ orcamento.empresa.nome_fantasia }}</strong>
    {% endif %}
  </div>
  <div class="empresa-info">
    <strong>{{ orcamento.empresa.razao_social }}</strong><br>
    CNPJ: {{ orcamento.empresa.cnpj }}<br>
    {{ orcamento.empresa.endereco }}<br>
    {{ orcamento.empresa.cidade }} - {{ orcamento.empresa.uf }}<br>
    Telefone: {{ orcamento.empresa.telefone }}<br>
    E-mail: {{ orcamento.empresa.email }}
  </div>
</header>

<h1>Or√ßamento n¬∫ {{ orcamento.id }}</h1>

<div class="dados-secundarios">
  <div><strong>Data:</strong> {{ orcamento.criado_em|date:"d/m/Y" }}</div>
  <div><strong>Vencimento:</strong> {{ orcamento.vencimento|date:"d/m/Y" }}</div>
  <div><strong>Previs√£o de Entrega:</strong> {{ orcamento.previsao_entrega|date:"d/m/Y" }}</div>
  <div><strong>Forma de Pagamento:</strong> {{ orcamento.forma_pagamento }}</div>
  <div><strong>Respons√°vel:</strong> 
    {% if orcamento.empresa.responsavel %}
      {{ orcamento.empresa.responsavel }}
    {% else %}
      {{ orcamento.responsavel }}
    {% endif %}
  </div>
</div>

<h3>Cliente</h3>
<table>
  <tr><th>Raz√£o Social</th><td>{{ orcamento.cliente.razao_social }}</td></tr>
  <tr><th>Nome Fantasia</th><td>{{ orcamento.cliente.nome_fantasia }}</td></tr>
  <tr><th>CPF/CNPJ</th><td>{{ orcamento.cliente.cpf_cnpj }}</td></tr>
  <tr><th>Telefone</th><td>{{ orcamento.cliente.telefone }}</td></tr>
  <tr><th>E-mail</th><td>{{ orcamento.cliente.email }}</td></tr>
  <tr><th>Endere√ßo</th><td>{{ orcamento.cliente.endereco }}</td></tr>
</table>

<h3 style="margin-top: 30px;">Itens do Or√ßamento</h3>
<table>
  <thead>
    <tr>
      <th>Tipo</th>
      <th>Descri√ß√£o</th>
      <th>Qtd</th>
      <th>Valor Unit. (R$)</th>
      <th>Total (R$)</th>
    </tr>
  </thead>
  <tbody>
    {% for item in itens %}
    <tr>
      <td>{{ item.tipo|title }}</td>
      <td>{{ item.nome }}</td>
      <td>{{ item.quantidade }}</td>
      <td>{{ item.valor_unitario|floatformat:2 }}</td>
      <td>{{ item.total|floatformat:2 }}</td>
    </tr>
    {% endfor %}
  </tbody>
</table>

<div class="totais">
  <p><strong>Subtotal:</strong> R$ {{ orcamento.subtotal|floatformat:2 }}</p>
  <p><strong>Desconto:</strong> R$ {{ orcamento.desconto|floatformat:2 }}</p>
  <p><strong>Total Final:</strong> R$ {{ orcamento.total|floatformat:2 }}</p>
</div>

{% if orcamento.observacao %}
<div class="observacoes">
  <strong>Observa√ß√µes:</strong><br>
  {{ orcamento.observacao|linebreaks }}
</div>
{% endif %}

<div class="assinatura">
  ___________________________________________<br>
  {% if orcamento.empresa.responsavel %}
      <strong>{{ orcamento.empresa.responsavel }}</strong>
  {% else %}
      <strong>{{ orcamento.responsavel }}</strong>
  {% endif %}
  <br>
  Respons√°vel
</div>

<div class="no-print">
  <button onclick="window.print()">üñ®Ô∏è Imprimir</button>
</div>

</body>
</html>
